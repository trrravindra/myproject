/**
 * simplePagination.js v1.6
 * A simple jQuery pagination plugin.
 * http://flaviusmatis.github.com/simplePagination.js/
 *
 * Copyright 2012, Flavius Matis
 * Released under the MIT license.
 * http://flaviusmatis.github.com/license.html
 */

define("vendor/pagination",["jquery"],function(e){!function(e,t){var a={init:function(t){var n=e.extend({items:1,itemsOnPage:1,pages:0,displayedPages:3,edges:1,currentPage:1,hrefTextPrefix:"#page-",hrefTextSuffix:"",prevText:"Prev",nextText:"Next",firstText:"First",lastText:"Last",ellipseText:"&hellip;",cssStyle:"light-theme",labelMap:[],selectOnClick:!0,onPageClick:function(e,t){},onInit:function(){}},t||{}),i=this;return n.pages=n.pages?n.pages:Math.ceil(n.items/n.itemsOnPage)?Math.ceil(n.items/n.itemsOnPage):1,n.currentPage=n.currentPage-1,n.halfDisplayed=n.displayedPages/2,this.each(function(){i.addClass(n.cssStyle+" simple-pagination").data("pagination",n),a._draw.call(i)}),n.onInit(),this},selectPage:function(e){return a._selectPage.call(this,e-1),this},firstPage:function(){return this.data("pagination").currentPage>0&&a._selectPage.call(this,1),this},prevPage:function(){var e=this.data("pagination");return e.currentPage>0&&a._selectPage.call(this,e.currentPage-1),this},nextPage:function(){var e=this.data("pagination");return e.currentPage<e.pages-1&&a._selectPage.call(this,e.currentPage+1),this},lastPage:function(){var e=this.data("pagination");return e.currentPage<e.pages-1&&a._selectPage.call(this,e.pages),this},getPagesCount:function(){return this.data("pagination").pages},getCurrentPage:function(){return this.data("pagination").currentPage+1},destroy:function(){return this.empty(),this},drawPage:function(e){var t=this.data("pagination");return t.currentPage=e-1,this.data("pagination",t),a._draw.call(this),this},redraw:function(){return a._draw.call(this),this},disable:function(){var e=this.data("pagination");return e.disabled=!0,this.data("pagination",e),a._draw.call(this),this},enable:function(){var e=this.data("pagination");return e.disabled=!1,this.data("pagination",e),a._draw.call(this),this},updateItems:function(e){var t=this.data("pagination");t.items=e,t.pages=a._getPages(t),this.data("pagination",t),a._draw.call(this)},updateItemsOnPage:function(e){var t=this.data("pagination");return t.itemsOnPage=e,t.pages=a._getPages(t),this.data("pagination",t),a._selectPage.call(this,0),this},_draw:function(){var t,n,i=this.data("pagination"),s=a._getInterval(i);a.destroy.call(this),n="function"==typeof this.prop?this.prop("tagName"):this.attr("tagName");var r="OL"===n?this:e("<ol></ol>").appendTo(this);if(i.currentPage+1>1&&i.firstText&&a._appendItem.call(this,i.pages-(i.pages+1),{text:i.firstText,classes:"first"}),i.prevText&&a._appendItem.call(this,i.currentPage-1,{text:i.prevText,classes:"prev"}),s.start>0&&i.edges>0){var l=Math.min(i.edges,s.start);for(t=0;t<l;t++)a._appendItem.call(this,t);i.edges<s.start&&s.start-i.edges!=1?r.append('<li class="disabled"><span class="ellipse">'+i.ellipseText+"</span></li>"):s.start-i.edges==1&&a._appendItem.call(this,i.edges)}for(t=s.start;t<s.end;t++)a._appendItem.call(this,t);if(s.end<i.pages&&i.edges>0){i.pages-i.edges>s.end&&i.pages-i.edges-s.end!=1?r.append('<li class="disabled"><span class="ellipse">'+i.ellipseText+"</span></li>"):i.pages-i.edges-s.end==1&&a._appendItem.call(this,s.end++);var o=Math.max(i.pages-i.edges,s.end);for(t=o;t<i.pages;t++)a._appendItem.call(this,t)}i.nextText&&a._appendItem.call(this,i.currentPage+1,{text:i.nextText,classes:"next"}),i.currentPage+1<i.pages&&i.lastText&&a._appendItem.call(this,i.pages,{text:i.lastText,classes:"last"})},_getPages:function(e){return Math.ceil(e.items/e.itemsOnPage)||1},_getInterval:function(e){return{start:Math.ceil(e.currentPage>e.halfDisplayed?Math.max(Math.min(e.currentPage-e.halfDisplayed,e.pages-e.displayedPages),0):0),end:Math.ceil(e.currentPage>e.halfDisplayed?Math.min(e.currentPage+e.halfDisplayed,e.pages):Math.min(e.displayedPages,e.pages))}},_appendItem:function(t,n){var i,s,r=this,l=r.data("pagination"),o=e("<li></li>"),c=r.find("ol");t=t<0?0:t<l.pages?t:l.pages-1,i={text:t+1,classes:""},l.labelMap.length&&l.labelMap[t]&&(i.text=l.labelMap[t]),i=e.extend(i,n||{}),t==l.currentPage||l.disabled?(l.disabled?o.addClass("disabled"):o.addClass("active"),s=e('<span class="current">'+i.text+"</span>")):(s=e('<a href="'+l.hrefTextPrefix+(t+1)+l.hrefTextSuffix+'" class="page-link">'+i.text+"</a>"),s.click(function(e){return a._selectPage.call(r,t,e)})),i.classes&&s.addClass(i.classes),o.append(s),c.length?c.append(o):r.append(o)},_selectPage:function(e,t){var n=this.data("pagination");return n.currentPage=e,n.selectOnClick&&a._draw.call(this),n.onPageClick(e+1,t)}};e.fn.pagination=function(t){return a[t]&&"_"!=t.charAt(0)?a[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist on jQuery.pagination"):a.init.apply(this,arguments)}}(e)}),define("erefill/mediators/general",["jquery","stapes","./globals","modules/overlay","vendor/pagination"],function(e,t,a,n){"use strict";return new(t.subclass({constructor:function(){var t=this;t.initEvents(),t.maxLength=14,e(function(){t.emit("domready")})},initEvents:function(){var e=this;e.on("domready",e.onDomReady)},onDomReady:function(){var t=e("#totalrecords").text();t=parseInt(t);var i=e("#page_num").val()?e("#page_num").val():"1";e(".pagination").pagination({currentPage:i,items:t,itemsOnPage:10,firstText:"<<",lastText:">>",onPageClick:function(t,a){a.preventDefault(),e("#page_num").val(t),window.setTimeout(function(){e(".form-range-filter").submit()},500)}}),e(".drug-info-modal").on("click",function(t){t.preventDefault(),a.showOverlayLoader();var i=e(this).attr("data-modal"),s=e(this).attr("data-drug-id"),r=e(window.document).find("input[name='_tk']").val();e.ajax({type:"POST",url:i,data:"data_drug_id="+s+"&_tk="+r,cache:!1,success:function(e){n.open({content:e,wrapClassName:"",detachOnClose:!0}),a.removeOverlayLoader(),document.body.style.overflow="hidden"},error:function(t,n,i){a.removeOverlayLoader(),window.location.href=t.getResponseHeader("URL");var s=decodeURIComponent(t.responseText);s=e.parseJSON(s);var r=s.exception,l="<li>"+r+"</li>";e(".err-msg ul").html(l),e(".err-msg").show(),e(".err-msg ul").show()}})}),e(document).on("click",".close,.acceptclose",function(e){e.preventDefault(),document.body.style.overflow="scroll"}),e(".pagination ul li a").on("click",function(e){a.showOverlayLoader()});var s=e("html[lang='fr_CA'] table.medication-list"),r=s.find("th"),l=this;e.each(r,function(){var t=e(this),a=t.text();t.text(""),l.hyphenation(a,t)})},hyphenation:function(e,t){for(var a=this,n=(e.length,a.maxLength),i=e.split(" "),s=0;s<i.length;s++)i[s].length>n?t.append(i[s].substr(0,n-4)+"- \n"+this.recursiveHyphenation(i[s].substr(n-4))):t.append(i[s]),t.append(" ")},recursiveHyphenation:function(e){var t=this,a=e.length,n=t.maxLength;return a>n?e.substr(0,n-1)+"-"+this.recursiveHyphenation(e.substr(n-1)):e}}))}),require(["require-config"],function(){require(["erefill/mediators/general"])}),define("erefill-general",function(){}),define("erefill-general",function(){});