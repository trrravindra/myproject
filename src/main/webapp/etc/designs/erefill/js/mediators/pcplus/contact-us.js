define(["jquery","stapes","../globals","jquery.validate","modules/datepicker"],function(e,t,n,r,i){function p(){o=e(".btn-clear-form"),u=e(".form-feedback:first"),a=e(".reason-for-contact"),f=e(".points-inquiry-field"),l=e(".non-points-inquiry-field")}function d(){s.on("domready",s.onDomReady),o.on("click",s.clearForm),a.on("change",s.showHidePointsInquiryFields)}function v(){u.validate({errorClass:"invalid",errorContainer:".err-msg",errorLabelContainer:".err-msg ul",wrapper:"li",onkeyup:!1,onclick:!1,onfocusout:!1,highlight:function(t,n){e(t).parents("label").length?e(t).parents("label").addClass(n):e(t).addClass(n)},unhighlight:function(t,n){e(t).parents("label").length?e(t).parents("label").removeClass(n):e(t).removeClass(n)},showErrors:function(t,n){var r=e(".err-msg").data("default-msg");this.defaultShowErrors(),this.errorContext.empty();if(n.length){var i=this.errorContext;r&&i.append(e("<li />").text(r));var s=[];e.each(n,function(t,n){e.inArray(n.message,s)===-1&&(s.push(n.message),i.append(e("<li />").text(n.message)))})}},submitHandler:function(e){var t={category:"pc plus",action:"pc plus:contact us:submit",label:"",value:"",event:"GA Event"};n.fireAnalytics(t),setTimeout(function(){e.submit()},300)}})}function m(){var t=e(".date-picker"),n={dateFormat:"mm-dd-yy",showOn:"both",changeMonth:!0,changeYear:!0,buttonImage:t.attr("data-calendar-url"),buttonText:t.attr("title"),buttonImageOnly:!0,maxDate:0},r=new i({element:t,datepickerConfig:n});r.on(r.events.componentReady,function(){c=!0})}function g(){c||m(),l.addClass("hidden"),f.removeClass("hidden")}function y(){l.removeClass("hidden"),f.addClass("hidden")}var s,o,u,a,f,l,c=!1,h={PONINTS_INQUIRY_SELECT_VALUE:"ContactUs.reason2.label"},b=t.subclass({constructor:function(){s=this,p(),d(),e(function(){s.emit("domready")})},clearForm:function(e){typeof e!="undefined"&&e.preventDefault(),u[0].reset(),u.find(".invalid").removeClass("invalid"),u.validate().resetForm(),u.find(".response-top .check-label span").removeClass("checked").filter(":first").addClass("checked"),u.find(".response-bottom .check-label span").removeClass("checked").filter(":first").addClass("checked");var t=u.find("select option:first-child");t.attr("selected","selected"),u.find(".selector span").html(t.html())},onDomReady:function(){v()},showHidePointsInquiryFields:function(e){var t=e.target.value||a.val();t!==h.PONINTS_INQUIRY_SELECT_VALUE?y():g()}});return new b});