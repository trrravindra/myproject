define(["jquery","stapes"],function(e,t){var n={},r=t.subclass({constructor:function(t){var r=this;r.config=e.extend({},n,t),r.setupClickAnalytics()},setupClickAnalytics:function(){var t=this,n=t.config;e(".why-not-try a").on("click",function(r){var i=e(this),s=t.getCategoryFromUrl(i.attr("href")),o=t.clean(i.find(".title").last().text());t.consoleLog(s+" "+o),t.fireClickAnalytics({category:n.pageCategory,action:"engagement:why not try",label:s+":"+o,value:"",event:"GA Event"})}),e(".media-object-shadowbox .media-object-action").on("click",function(r){var i=e(this),s=t.getCategoryFromUrl(i.attr("href")),o=t.clean(i.find(".media-object-title").text());t.consoleLog(s+" "+o),t.fireClickAnalytics({category:n.pageCategory,action:"engagement:related content",label:s+":"+o,value:"",event:"GA Event"})}),e(".featured-products").on("click",".card a",function(r){var i=e(this),s=t.getCategoryFromUrl(i.attr("href")),o=t.clean(i.find(".title").text());t.consoleLog(s+" "+o),t.fireClickAnalytics({category:n.pageCategory,action:"engagement:cross sell",label:s+":"+o,value:"",event:"GA Event"})}),e(".actions .product-info").on("click",function(e){t.fireClickAnalytics({category:n.pageCategory,action:"engagement:view "+n.pageCategory+" detailed info",label:n.pageName,value:"",event:"GA Event"})}),e(".actions .print").on("click",function(e){t.fireClickAnalytics({category:n.pageCategory,action:"engagement:print "+n.pageCategory+" details",label:n.pageName,value:"",event:"GA Event"})}),e(".ingredients-instructions a").not(".see-all-steps").on("click",function(){var r=e(this),i=t.clean(r.text());t.fireClickAnalytics({category:"recipes",action:"engagement:ingedient click:"+i,label:n.pageName,value:"",event:"GA Event"})}),e(".article p a").on("click",function(e){t.fireClickAnalytics({category:n.categoryName,action:"engagement:article body click",label:n.pageName,value:"",event:"GA Event"})}),e(".modal-video").on("click",function(e){t.fireClickAnalytics({category:n.pageCategory,action:"engagement:video player modal",label:n.pageName,value:"",event:"GA Event"})}),e(".media-object-video .media-object-cta a").on("click",function(r){var i=e(this),s=t.getCategoryFromUrl(i.attr("href")),o=t.clean(e(".media-object-title",i.closest(".media-object-details")).text());t.consoleLog(s+" "+o),t.fireClickAnalytics({category:n.pageCategory,action:"engagement:related content",label:s+":"+o,value:"",event:"GA Event"})}),e(".reviews-cta").on("click",function(r){var i=e(this).text().toLowerCase().indexOf("write")>-1,s=i?n.pageCategory+":"+n.pageCategory+" review modal:"+n.pageName:n.pageCategory+":"+n.pageCategory+" review modal:write"+n.pageName;t.fireClickAnalytics({pageview:s,event:"vir_pageview"})})},fireClickAnalytics:function(e){if(typeof dataLayer!="undefined")try{dataLayer.push(e)}catch(t){consoleLog(t)}},clean:function(t){var n=e.trim(t.replace(/[^a-zA-Z0-9 _-]/gi,"").replace(/\s{2,}/g," ")).toLowerCase();return n},consoleLog:function(e){typeof console!="undefined"&&console.log(e)},getCategoryFromUrl:function(t){var n=t,r=1,i,s=e("html").attr("lang");return i=n.slice(n.indexOf(s)).split("/"),i.length<2?"other":i[r]}});return function(e){return new r(e)}});