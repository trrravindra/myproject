define(["jquery","stapes","../vendor/jquery.easing","../mediators/globals"],function(e,t,n,r){function p(){i.on(i.events.COMPONENT_READY,d)}function d(){if(typeof s.pathToTemplate=="undefined")throw new Error("You must pass in a Template Path using the pathToTemplate param.");require(["tpl!"+s.pathToTemplate],function(t){u=t.render(s.templateData),e(".main").append(u),f=e("."+s.containerClassName),f.css(s.direction,"-500px").addClass(s.offScreenClassName),f.find(".close").on("click",g),v(),s.useEvents&&i.emit(i.events.COMPONENT_RENDERED)})}function v(){if(typeof o=="undefined")throw new Error("You must pass in an instance of ScrollManager at this time.");o.manuallyInsertElement(e(".footer-main"),"footer-main"),o.on(o.events.ELEMENT_IN_RANGE,function(e){e.id==="footer-main"&&!a&&m()})}function m(){var e={opacity:1};e[s.direction]=0,f.removeClass(s.offScreenClassName),f.animate(e,{easing:"easeOutQuint",duration:s.animationDuration,complete:function(){a=!0;var e,t,n;l.on("scroll.catfishCrawler",function(e){var t=f.offset(),n=t.top+f.height(),r=l.scrollTop()+l.height()-20;n>r&&g()}),i.emit(i.events.SHOW_IN_COMPLETE),s.useCookie&&r.cookieManager.setCookie(s.cookieName,!0)}})}function g(){var t={opacity:0};t[s.direction]="-500px",f.animate(t,{easing:"easeInBack",duration:s.animationDuration,complete:function(){e(this).addClass(s.offScreenClassName),s.useEvents&&i.emit(i.events.SHOW_OUT_COMPLETE),i.destroy()}})}var i,s,o,u,a=!1,f,l=e(window),c={pathToTemplate:undefined,templateData:{content:""},showOutDelay:null,useCookie:!0,cookieName:"catfish_crawler",containerClassName:"catfish-crawler",direction:"right",offScreenClassName:"offscreen",useEvents:!0,animationDuration:700,scrollManager:null},h={EVENT_NAMESPACE:"CatfishCrawler"},y=t.subclass({events:{COMPONENT_READY:h.EVENT_NAMESPACE+".componentReady",COMPONENT_RENDERED:h.EVENT_NAMESPACE+".componentRendered",SHOW_OUT_COMPLETE:h.EVENT_NAMESPACE+".showOutComplete",SHOW_IN_COMPLETE:h.EVENT_NAMESPACE+".showInComplete"},constructor:function(t,n){i=this,s=e.extend({},c,t),o=n,p(),e(function(){i.emit(i.events.COMPONENT_READY)})},showCrawler:function(){m()},hideCrawler:function(){g()},destroy:function(){f.remove(),l.off("scroll.catfishCrawler")}});return function(e,t){return new y(e,t)}});