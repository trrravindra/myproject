define(["jquery","stapes"],function(e,t){var n={},r=t.subclass({constructor:function(t){var r=this;r.config=e.extend({},n,t),r.setupClickAnalytics()},setupClickAnalytics:function(){var t=this,n=t.config;e(window.document).on("click",".event-infoWindow .btn-details",function(n){var r=e(this),i=r.closest(".event-infoWindow"),s=t.clean(e(".title",i).text()),o="upcoming";i.hasClass("event-infoWindow-new")?o="new today":i.hasClass("event-infoWindow-today")&&(o="today"),t.fireClickAnalytics({category:"PCSIR:eatfleet",action:"map:pin:details",label:o+":"+s,value:"",event:"GA Event"})}),e(window.document).on("click",".event-infoWindow .btn-directions",function(n){var r=e(this),i=r.closest(".event-infoWindow"),s=t.clean(e(".title",i).text()),o="upcoming";i.hasClass("event-infoWindow-new")?o="new today":i.hasClass("event-infoWindow-today")&&(o="today"),t.fireClickAnalytics({category:"PCSIR:eatfleet",action:"map:pin:directions",label:o+":"+s,value:"",event:"GA Event"})}),e(window.document).on("click",".event-infoWindow .btn-gallery",function(n){var r=e(this),i=t.clean(e(".title",r.closest(".event-infoWindow")).text());t.fireClickAnalytics({category:"PCSIR:eatfleet",action:"map:pin:gallery",label:"past:"+i,value:"",event:"GA Event"})}),e(window.document).on("click",".event-infoWindow .btn-poll",function(n){var r=e(this),i=t.clean(e(".title",r.closest(".event-infoWindow")).text());t.fireClickAnalytics({category:"PCSIR:eatfleet",action:"map:pin:choose",label:"polled:"+i,value:"",event:"GA Event"})}),e(".region-selector a").click(function(n){var r=t.clean(e(this).text());t.fireClickAnalytics({category:"PCSIR:eatfleet",action:"regionchange",label:"region "+r,value:"",event:"GA Event"})}),e(".event-sort").on("change",function(n){var r=e(":selected",e(this)).val();t.fireClickAnalytics({category:"PCSIR:eatfleet",action:"sort",label:r,value:"",event:"GA Event"})}),e(window.document).on("click",".region-upcoming-events .city-container .title a:not(.region-upcoming-events .city-container.open .title a)",function(n){var r=e(this),i=t.clean(e(".events-city",r).text());t.fireClickAnalytics({category:"PCSIR:eatfleet",action:"engagement:location:upcoming:expand",label:i,value:"",event:"GA Event"})}),e(window.document).on("click",".region-upcoming-events .event-list",function(n){var r=e(this),i=t.clean(e(".events-city",r.closest(".city-container")).text()),s=t.clean(e(".event-address",r).text());t.fireClickAnalytics({category:"PCSIR:eatfleet",action:"engagement:location:upcoming:select",label:i+", "+s,value:"",event:"GA Event"})}),e(".region-events").on("click",".region-upcoming-events .event-list a",function(n){n.preventDefault();var r=e(this),i=r.attr("href"),s=t.clean(e(".region-selector .current").text()),o=t.clean(e(".events-city",r.closest(".city-container")).text()),u=r.closest(".event-list"),a=t.clean(e(".event-address",u).text()),f="details";u.hasClass("event-upcoming")?f="select":u.hasClass("event-poll")&&(f="poll"),t.fireClickAnalytics({category:"PCSIR:"+s+":eatfleet",action:"engagement:location:upcoming:"+f,label:o+", "+a,value:"",event:"GA Event"}),f!=="poll"&&setTimeout(function(){window.location.href=i},500)}),e(window.document).on("click",".region-past-events .city-container .title a:not(.region-past-events .city-container.open .title a)",function(n){var r=e(this),i=t.clean(e(".events-city",r).text());t.fireClickAnalytics({category:"PCSIR:eatfleet",action:"engagement:location:past:expand",label:i,value:"",event:"GA Event"})}),e(window.document).on("click",".region-past-events .event-list",function(n){var r=e(this),i=t.clean(e(".events-city",r.closest(".city-container")).text()),s=t.clean(e(".event-address",r).text());t.fireClickAnalytics({category:"PCSIR:eatfleet",action:"engagement:location:past:select",label:i+", "+s,value:"",event:"GA Event"})}),e(".region-events").on("click",".region-past-events .event-list a",function(n){n.preventDefault();var r=e(this),i=r.attr("href"),s=t.clean(e(".region-selector .current").text()),o=t.clean(e(".events-city",r.closest(".city-container")).text()),u=r.closest(".event-list"),a=t.clean(e(".event-address",u).text());t.fireClickAnalytics({category:"PCSIR:"+s+":eatfleet",action:"engagement:location:past:gallery",label:o+", "+a,value:"",event:"GA Event"}),setTimeout(function(){window.location.href=i},500)}),e(window.document).on("click",".overlay-ef-poll .form-buttons button",function(n){var r=e(this),i=e("input[type=radio]:checked",r.closest(".form-ef-poll"));if(i.length){var s=t.clean(i.closest("label").text()),o=e(".city-name",".overlay-ef-poll");o.length&&(s=o.text()+", "+s),t.fireClickAnalytics({category:"PCSIR:eatfleet",action:"engagement:poll:submit",label:s,value:"",event:"GA Event"})}});var r=e(".page-eat-fleet-details .header-content .title");e(".page-eat-fleet-details .btn-directions").click(function(n){var i=e(this),s=t.clean(r.text());t.fireClickAnalytics({category:"PCSIR:eatfleet",action:"engagement:directions",label:s,value:"",event:"GA Event"})}),e(".page-eat-fleet-details .btn-calendar").click(function(n){var i=e(this),s=t.clean(r.text());t.fireClickAnalytics({category:"PCSIR:eatfleet",action:"engagement:calendar",label:s,value:"",event:"GA Event"})}),e(".ef-event-gallery .ef-gallery-photo a").click(function(n){var i=e(this),s=t.clean(r.text());t.fireClickAnalytics({category:"PCSIR:eatfleet",action:"engagement:photo expand",label:s,value:"",event:"GA Event"})})},fireClickAnalytics:function(e){if(typeof dataLayer!="undefined")try{dataLayer.push(e)}catch(t){consoleLog(t)}},clean:function(t){var n=e.trim(t.replace(/[^a-zA-Z0-9 _-]/gi,"").replace(/\s{2,}/g," ")).toLowerCase();return n},consoleLog:function(e){typeof console!="undefined"&&console.log(e)}});return function(e){return new r(e)}});