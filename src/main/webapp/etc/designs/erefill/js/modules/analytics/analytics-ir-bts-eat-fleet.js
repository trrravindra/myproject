define(["jquery","stapes"],function(e,t){var n={},r=t.subclass({constructor:function(t){var r=this;r.config=e.extend({},n,t),r.setupClickAnalytics(),r.fireClickAnalytics({pageview:"BTSIR:eat fleet:home",event:"pageview"})},setupClickAnalytics:function(){var t=this,n=t.config;e(".carousel-hero a").on("click",function(n){var r=t.clean(e(this).parents(".content").find(".title").text());t.fireClickAnalytics({category:"BTSIR",action:"engagement:eatfleetlanding:hero",label:r,value:"",event:"GA Event"})}),e(window.document).on("click",".event-infoWindow .btn-details",function(n){var r=e(this),i=r.closest(".event-infoWindow"),s=t.clean(e(".title",i).text()),o="upcoming";i.hasClass("event-infoWindow-new")?o="new today":i.hasClass("event-infoWindow-today")&&(o="today"),t.fireClickAnalytics({category:"BTSIR",action:"map:pin:details",label:o+":"+s,value:"",event:"GA Event"})}),e(".region-selector a").click(function(n){var r=t.clean(e(this).text());t.fireClickAnalytics({category:"BTSIR",action:"engagement:eatfleetlanding:regionnav",label:r,value:"",event:"GA Event"})}),e(".event-sort").on("change",function(n){var r=e(":selected",e(this)).val();t.fireClickAnalytics({category:"BTSIR",action:"sort",label:r,value:"",event:"GA Event"})}),e(window.document).on("click",".region-upcoming-events .city-container .title a:not(.region-upcoming-events .city-container.open .title a)",function(n){var r=e(this),i=t.clean(e(".events-city",r).text());t.fireClickAnalytics({category:"BTSIR",action:"engagement:eatfleetlanding:regionnav:cityexpand",label:i,value:"",event:"GA Event"})}),e(window.document).on("click",".region-upcoming-events .event-list",function(n){var r=e(this),i=t.clean(e(".events-city",r.closest(".city-container")).text()),s=t.clean(e(".event-address",r).text());t.fireClickAnalytics({category:"BTSIR",action:"engagement:location:upcoming:select",label:i+", "+s,value:"",event:"GA Event"})}),e(".region-events").on("click",".region-upcoming-events .event-list a",function(n){n.preventDefault();var r=e(this),i=r.attr("href"),s=t.clean(e(".region-selector .current").text()),o=t.clean(e(".events-city",r.closest(".city-container")).text()),u=r.closest(".event-list"),a=t.clean(e(".event-address",u).text()),f="details";u.hasClass("event-upcoming")?f="select":u.hasClass("event-poll")&&(f="poll"),t.fireClickAnalytics({category:"BTSIR:"+s+":eatfleet",action:"engagement:location:upcoming:"+f,label:o+", "+a,value:"",event:"GA Event"}),f!=="poll"&&setTimeout(function(){window.location.href=i},500)}),e(window.document).on("click",".region-past-events .city-container .title a:not(.region-past-events .city-container.open .title a)",function(n){var r=e(this),i=t.clean(e(".events-city",r).text());t.fireClickAnalytics({category:"BTSIR",action:"engagement:location:past:expand",label:i,value:"",event:"GA Event"})}),e(window.document).on("click",".region-past-events .event-list",function(n){var r=e(this),i=t.clean(e(".events-city",r.closest(".city-container")).text()),s=t.clean(e(".event-address",r).text());t.fireClickAnalytics({category:"BTSIR",action:"engagement:location:past:select",label:i+", "+s,value:"",event:"GA Event"})}),e(".region-events").on("click",".region-past-events .event-list a",function(n){n.preventDefault();var r=e(this),i=r.attr("href"),s=t.clean(e(".region-selector .current").text()),o=t.clean(e(".events-city",r.closest(".city-container")).text()),u=r.closest(".event-list"),a=t.clean(e(".event-address",u).text());t.fireClickAnalytics({category:"BTSIR:"+s+":eatfleet",action:"engagement:location:past:gallery",label:o+", "+a,value:"",event:"GA Event"}),setTimeout(function(){window.location.href=i},500)}),e(window.document).on("click",".overlay-ef-poll .form-buttons button",function(n){var r=e(this),i=e("input[type=radio]:checked",r.closest(".form-ef-poll"));if(i.length){var s=t.clean(i.closest("label").text()),o=e(".city-name",".overlay-ef-poll");o.length&&(s=o.text()+", "+s),t.fireClickAnalytics({category:"BTSIR",action:"engagement:poll:submit",label:s,value:"",event:"GA Event"})}}),e(".header > a, .past-header > a",".region-events").on("click",function(n){var r=e(this).parents(".past-header").length===0,i,s;r?(i="seepast",s="seepastevents"):(i="seeupcoming",s="seeupcomingevents"),t.fireClickAnalytics({category:"BTSIR",action:"engagement:eatfleetlanding:regionnav:"+i,label:s,value:"",event:"GA Event"})}),e(".page-header > a",".ef-event-gallery").on("click",function(n){var r=e(".ef-event-gallery").hasClass("open")?"seefewerphotos":"seeallphotos";t.fireClickAnalytics({category:"BTSIR",action:"engagement:eatfleetlanding:eventgallery:"+r,label:r,value:"",event:"GA Event"})}),e(".more-to-explore a").on("click",function(n){var r=t.clean(e(this).parent().find(".title").text());t.fireClickAnalytics({category:"BTSIR",action:"engagement:eatfleetlanding:widefooterclick",label:r,value:"",event:"GA Event"})})},fireClickAnalytics:function(e){if(typeof dataLayer!="undefined")try{dataLayer.push(e)}catch(t){consoleLog(t)}},clean:function(t){var n=e.trim(t.replace(/[^a-zA-Z0-9 _-]/gi,"").replace(/\s{2,}/g," ")).toLowerCase();return n},consoleLog:function(e){typeof console!="undefined"&&console.log(e)}});return function(e){return new r(e)}});