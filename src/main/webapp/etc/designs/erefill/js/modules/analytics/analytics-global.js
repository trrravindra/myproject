define(["jquery","stapes"],function(e,t){var n={},r=t.subclass({constructor:function(t){var r=this;r.config=e.extend({},n,t),r.setupClickAnalytics()},setupClickAnalytics:function(){var t=this,n=t.config;e(".header-branded .store-info div .find-store-overlay-trigger").on("click",function(e){t.fireClickAnalytics({category:"global",action:"engagement:find store prompt",label:"",value:"",event:"GA Event"})});var r=e(".share");e(window.document).on("click",".form-write-review button",function(e){t.fireClickAnalytics({category:n.pageCategory,action:"engagement:submitted review",label:n.pageName,value:"",event:"GA Event"})}),r.on("click",".button.pinterest a",function(){t.fireClickAnalytics({category:"global",action:"engagement:share content",label:"engagement:pinterest",value:"",event:"GA Event"})});var i=window.setInterval(function(){typeof twttr!="undefined"&&(twttr.events.bind("tweet",function(n){var r=e(n.target),i=r.closest("[data-url]"),s=i.length?i.data("url"):"no url";t.fireClickAnalytics({category:"global",action:"engagement:share content:twitter",label:s,value:"",event:"GA Event"})}),clearInterval(i))},1e3),s=window.setInterval(function(){typeof FB!="undefined"&&(FB.Event.subscribe("edge.create",function(e,n){t.fireClickAnalytics({category:"global",action:"engagement:share content:facebook",label:e,value:"",event:"GA Event"})}),clearInterval(s))},1e3);e(".share .email").on("click",function(e){t.fireClickAnalytics({category:"global",action:"engagement:share content",label:"engagement:email",value:"",event:"GA Event"})}),e(".header-branded .store-info > .find-store-overlay-trigger").on("click",function(e){t.fireClickAnalytics({category:"global",action:"engagement:view fly",label:"",value:"",event:"GA Event"})}),e(".header-branded .social-links .facebook").on("click",function(e){t.fireClickAnalytics({category:"global",action:"outgoing:social",label:"outgoing:facebook",value:"",event:"GA Event"})}),e(".header-branded .social-links .pinterest").on("click",function(e){t.fireClickAnalytics({category:"global",action:"outgoing:social",label:"outgoing:pinterest",value:"",event:"GA Event"})}),e(".header-branded .social-links .twitter").on("click",function(e){t.fireClickAnalytics({category:"global",action:"outgoing:social",label:"outgoing:twitter",value:"",event:"GA Event"})}),e(".header-branded .social-links .youtube").on("click",function(e){t.fireClickAnalytics({category:"global",action:"outgoing:social",label:"outgoing:youtube",value:"",event:"GA Event"})}),e(window.document).on("click",".overlay-find-store .overlay-find-store-form button",function(n){var r=e(this),i=t.clean(r.siblings(".input-search").val());t.fireClickAnalytics({category:"global",action:"engagement:find store prompt:submit",label:"find store:"+i,value:"",event:"GA Event"})}),e(".card-fb a").on("click",function(e){t.fireClickAnalytics({category:"home",action:"outgoing:social",label:"facebook:todays question",value:"",event:"GA Event"})}),e(".card-twitter-feed .twitter-link, .card-buzz .link-button").on("click",function(e){t.fireClickAnalytics({category:"home",action:"outgoing:social",label:"twitter:tile",value:"",event:"GA Event"})}),e(".card-twitter-feed .facebook-link, .pc-social-callout .facebook-button a").on("click",function(e){t.fireClickAnalytics({category:"home",action:"outgoing:social",label:"facebook:tile",value:"",event:"GA Event"})}),e(".card.promo.pcplus a").on("click",function(e){t.fireClickAnalytics({category:"home",action:"outgoing:pcplus",label:"tile",value:"",event:"GA Event"})}),e(".mobile-apps a").on("click",function(n){var r=e(this).data("app-store-name");t.fireClickAnalytics({category:"pc plus",action:"engagement:pc plus:email app link",label:r,value:"",event:"GA Event"})})},fireClickAnalytics:function(e){if(typeof dataLayer!="undefined")try{dataLayer.push(e)}catch(t){consoleLog(t)}},clean:function(t){var n=e.trim(t.replace(/[^a-zA-Z0-9 _-]/gi,"").replace(/\s{2,}/g," ")).toLowerCase();return n},consoleLog:function(e){typeof console!="undefined"&&console.log(e)}});return function(e){return new r(e)}});