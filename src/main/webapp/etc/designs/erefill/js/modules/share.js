define(["jquery","stapes","jquery.sharrre"],function(e,t,n){var r={el:null,delay:4e3},i=t.subclass({constructor:function(t){var n=this;n.config=e.extend({},r,t),n.el=e(n.config.el);if(!n.el.length)return;n.initEvents(),window.receiveCount=e.noop,n.el.addClass("open"),n.el.attr("data-fb-twitter-only")?n.initFbTwitter():n.el.attr("data-expanded")?n.initLarge():n.initSmall()},initEvents:function(){var e=this;e.on({click:function(t){clearTimeout(e.timer),e.show(t)},hover:function(t){clearTimeout(e.timer)},hide:function(t){e.timer=setTimeout(function(){e.hide(t)},e.config.delay)}}),e.el.on("click",".email",function(e){e.stopImmediatePropagation()})},setShareLanguage:function(){var t=this,n={},r=e("html").attr("lang");return r||(r="en_CA"),r==="fr_CA"?(n.facebook=r,n.twitter="fr",n.googlePlus="fr-CA"):(n.facebook=r,n.twitter="en",n.googlePlus="en-CA"),n},initSmall:function(){var t=this,n=t.setShareLanguage();t.el.sharrre({enableCounter:!1,share:{facebook:!0,twitter:!0,pinterest:!0},buttons:{googlePlus:{lang:n.googlePlus},facebook:{count:"none",layout:"box_count",lang:n.facebook},twitter:{count:"none",lang:n.twitter},pinterest:{media:t.el.attr("data-media")}},render:function(t,n){e(t.element).attr("data-loaded",1)},click:function(e,n){t.emit("click",e)},hover:function(e,n){t.emit("hover",e)},hide:function(e,n){t.emit("hide",e)}})},initLarge:function(){var t=this,n=t.setShareLanguage();t.el.sharrre({enableCounter:!1,enableHover:!1,share:{facebook:!0,twitter:!0,pinterest:!0,googlePlus:!0},buttons:{googlePlus:{size:"medium",annotation:"none",lang:n.googlePlus},facebook:{count:"none",layout:"box_count",lang:n.facebook},twitter:{count:"none",lang:n.twitter},pinterest:{media:t.el.attr("data-media")}},render:function(t,n){e(t.element).attr("data-loaded",1)}})},initFbTwitter:function(){var t=this,n=t.setShareLanguage();t.el.sharrre({enableCounter:!1,enableHover:!1,share:{facebook:!0,twitter:!0},buttons:{facebook:{count:"none",layout:"box_count",lang:n.facebook},twitter:{count:"none",lang:n.twitter}},render:function(t,n){e(t.element).attr("data-loaded",1)}})},show:function(t){e(t.element).removeClass("closed").addClass("open")},hide:function(t){e(t.element).removeClass("open").addClass("closed")}});return function(e){return new i(e)}});