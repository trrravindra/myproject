define(["jquery","stapes"],function(e,t){function c(){return r.clean(a.data("current-theme-label"))}window.onBestOfBestOpen=function(e){r.fireClickAnalytics({pageview:"best:view all modal",event:"vir_pageview"})};var n={},r,i=0,s="",o=e(".theme-menu.collapsed"),u=e(".theme-menu.expanded"),a=e(".theme-active"),f={ERROR_GETTING_LABEL:"Error getting label",ERROR_GETTING_SECTION:"Error getting section"},l={HERO:"HERO",JOIN_THE_CONVERSATION:"JTS",BRAND_FEATURE:"IS",VIDEOS:"HT",DELICIOUSNESS_INCLUDED:"DI",DISCOVER_EVEN_MORE:"DEM"},h=t.subclass({constructor:function(t){r=this,r.config=e.extend({},n,t),i=u.find("li > a.active").parents("li").index(),s=c(),e("body").hasClass("ir-grid")||(setTimeout(function(){var t=e(".carousel-hero .slides .flex-active-slide"),n=t.find(".title").text()||"slide name not found";r.fireClickAnalytics({category:"BTSIR",action:"engagement:hero:impression",label:n,value:"",event:"GA Event"})},3e3),setTimeout(function(){i=u.find("li > a.active").parents("li").index(),r.fireClickAnalytics({category:"BTSIR",action:"read12",label:s,value:"",event:"GA Event"})},12e3)),r.setupClickAnalytics()},setupClickAnalytics:function(){var t=this,n=t.config;e(".theme-menu > ul > li > a").on("click",function(n){var r=e(this),o=r.parents(".gi-wrapper"),u=o.hasClass("sticky-nav")?"nav:sticky":"nav";i=r.parents("li").index(),s=t.clean(r.text())||c(),t.fireClickAnalytics({category:"BTSIR:nav",action:u,label:s,value:"",event:"GA Event"})}),e(".quick-finder-btn .btn-plain").on("click",function(n){t.fireClickAnalytics({category:"BTSIR:"+t.getSectionName(e(this)),action:"nav:quickfind",label:"deploy",value:"",event:"GA Event"})}),e(".quick-finder-content .links > ul > li > a").on("click",function(n){var r=e(this),i;r.find("img").length>0?i=r.find("img").attr("alt")||f.ERROR_GETTING_LABEL:i=r.text()||f.ERROR_GETTING_LABEL,t.fireClickAnalytics({category:"BTSIR:"+t.getSectionName(r),action:"nav:quickfind",label:i,value:"",event:"GA Event"})}),e(".hero-carousel-direction-nav .carousel-control-button").on("click",function(){var n=e(this),r=n.data("direction")==="prev"?"left":"right",i=e(".carousel-hero"),s=i.find("li.flex-active-slide").index(),o=i.find(".slides > li").length,u=r==="left"?--s:++s;u>=o?u=0:u<0&&(u=o-1);var a=e(i.find(".slides > li")[u]),l=a.find(".title").text()||f.ERROR_GETTING_LABEL;t.fireClickAnalytics({category:"BTSIR:"+t.getSectionName(n),action:"engagement:carousel:arrow "+r,label:l,value:"",event:"GA Event"})}),e(window.document).on("click",".carousel-hero .recipe-callout > a",function(n){var r=e(this),i=r.find(".title").text()||f.ERROR_GETTING_LABEL;t.fireClickAnalytics({category:"BTSIR:"+t.getSectionName(r),action:"engagement:hero",label:i,value:"",event:"GA Event"})}),e(window.document).on("click",".carousel-hero .related-content .media-object-action",function(n){var r=e(this),i=r.parents(".flex-active-slide"),s=i.find(".recipe-callout .title").text()||f.ERROR_GETTING_LABEL,o=r.find(".media-object-title").text()||f.ERROR_GETTING_LABEL;t.fireClickAnalytics({category:"BTSIR:"+t.getSectionName(r),action:"engagement:hero:related",label:s+":"+o,value:"",event:"GA Event"})}),e(".facebook-chat a").on("click",function(n){t.fireClickAnalytics({category:"BTSIR:"+t.getSectionName(e(this)),action:"outgoing:social:facebook",label:"tile",value:"",event:"GA Event"})}),e(".card.best-of-the-best .modal").on("click",function(n){t.fireClickAnalytics({category:"BTSIR:"+t.getSectionName(e(this)),action:s+":thebest:see_all_list",label:"tile",value:"",event:"GA Event"})}),e(window.document).on("click",".overlay-best-list ul li a",function(n){n.preventDefault();var r=e(this).attr("href"),i=t.clean(e(this).text())||f.ERROR_GETTING_LABEL;t.fireClickAnalytics({category:"BTSIR:bestoflistoverlay",action:s+":thebest:"+i,label:"tile",value:"",event:"GA Event"}),window.location.href=r}),e(".video-player .tabs li > a").on("click",function(n){if(n.isTrigger)return;var r=e(this).text()||f.ERROR_GETTING_LABEL;t.fireClickAnalytics({category:"BTSIR:HT",action:"engagement:HT:select theme",label:"HT:"+r,value:"",event:"GA Event"})}),e(".video-player .tab-content .media-object-action").on("click",function(n){var r=t.clean(e(this).find(".media-object-title").text())||f.ERROR_GETTING_LABEL;t.fireClickAnalytics({category:"BTSIR:"+t.getSectionName(e(this)),action:"engagement:video player modal",label:"sidebar:"+r,value:"",event:"GA Event"})}),e(".deliciousness-included-direction-nav .carousel-control-button").on("click",function(n){var r=e(this).data("direction")==="prev"?"left":"right";t.fireClickAnalytics({category:"BTSIR:"+t.getSectionName(e(this)),action:"engagement:carousel:arrows:"+r,label:"",event:"GA Event"})}),e(window.document).on("click",".deliciousness-included-carousel .card a",function(n){var r=t.clean(e(this).parents(".card").find(".media-object-title").text())||f.ERROR_GETTING_LABEL;t.fireClickAnalytics({category:"BTSIR:"+t.getSectionName(e(this)),action:"engagement:DI:carousel:recipe",label:"recipe:"+r,value:"",event:"GA Event"})}),e(".di-products-direction-nav .carousel-control-button").on("click",function(n){var r=e(this).data("direction")==="prev"?"left":"right";t.fireClickAnalytics({category:"BTSIR:"+t.getSectionName(e(this)),action:"engagement:carousel:arrows:"+r,label:"",event:"GA Event"})}),e(window.document).on("click",".carousel-di-products .card a",function(n){var r=t.clean(e(this).parents(".card").find(".title").text())||f.ERROR_GETTING_LABEL;t.fireClickAnalytics({category:"BTSIR:"+t.getSectionName(e(this)),action:"engagement:DI:carousel",label:"product:"+r,value:"",event:"GA Event"})}),e(".dem-carousel-direction-nav .carousel-control-button").on("click",function(n){var r=e(this).data("direction")==="prev"?"left":"right";t.fireClickAnalytics({category:"BTSIR:"+t.getSectionName(e(this)),action:"engagement:carousel:arrows:"+r,label:"",event:"GA Event"})}),e(window.document).on("click",".carousel-discover-even-more .card a",function(n){var r=e(this),i=t.clean(e(".header .title",r).text()),s=t.getCategoryFromUrl(r.attr("href"));t.fireClickAnalytics({category:"BTSIR:"+t.getSectionName(r),action:"engagement:DM:carousel",label:s+":"+i,value:"",event:"GA Event"})}),e(".ir-grid .grid-view-nav .sort-trigger").on("click",function(n){var r=e(this).data("filter");t.fireClickAnalytics({category:"BTSIR:grid",action:"nav",label:r,value:"",event:"GA Event"})}),e(".ir-grid .sortable-grid .card a").on("click",function(n){var r=e(this),i=r.parents(".card"),s=i.data("filters"),o=i.find(".title").text()||f.ERROR_GETTING_LABEL;t.fireClickAnalytics({category:"BTSIR:grid",action:"engagement:searchgrid:perfect pairing",label:s+":"+o,value:"",event:"GA Event"})}),e(window.document).on("click",".card.free-from a",function(){var n=t.clean(e(this).parents(".card.free-from").find(".media-object-title").text());t.fireClickAnalytics({category:"BTSIR:IS",action:"engagement:IS:product",label:"product:"+n,value:"",event:"GA Event"})}),e(window.document).on("click",".brand-feature .card.video a",function(n){var r=e(this);r.hasClass("modal-video")?t.fireClickAnalytics({category:"BTSIR:IS",action:"engagement:IS:initiate video",label:"",value:"",event:"GA Event"}):r.hasClass("media-object-cta")&&t.fireClickAnalytics({category:"BTSIR:IS",action:"engagement:IS:join the conversation",label:"",value:"",event:"GA Event"})})},fireClickAnalytics:function(e){if(typeof dataLayer!="undefined")try{dataLayer.push(e)}catch(t){consoleLog(t)}},getCategoryFromUrl:function(t){var n=t,r=1,i,s=e("html").attr("lang");return i=n.slice(n.indexOf(s)).split("/"),i.length<2?"other":i[r]},clean:function(t){if(t){var n=e.trim(t.replace(/[^a-zA-Z0-9 _-]/gi,"").replace(/\s{2,}/g," ")).toLowerCase();return n}return null},getSectionName:function(e){var t=e.parents("section"),n=t.attr("class");switch(n){case"hero-carousel":return l.HERO;case"social-media":return l.JOIN_THE_CONVERSATION;case"brand-feature":return l.BRAND_FEATURE;case"video-player ir-video-player":return l.VIDEOS;case"deliciousness-included":case"deliciousness-included-carousel":case"di-products-carousel":return l.DELICIOUSNESS_INCLUDED;case"discover-even-more":case"discover-more-footer":return l.DISCOVER_EVEN_MORE;default:return f.ERROR_GETTING_SECTION}},consoleLog:function(e){typeof console!="undefined"&&console.log(e)}});return function(e){return new h(e)}});