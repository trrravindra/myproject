define(["jquery","stapes"],function(e,t){var n={el:null},r=t.subclass({constructor:function(t){var r=this;r.config=e.extend({},n,t),r.el=e(r.config.el);if(!r.el.length||r.el.attr("data-rendered"))return;r.set("item-uid",r.el.data("item")),r.set("input-target",r.el.siblings(r.el.attr("data-input-target"))),r.initMarkup(),r.initEvents()},initMarkup:function(){var t=this,n=e((new Array(6)).join("<span/>"));t.el.attr("data-rendered",!0).append(n),t.set("el.stars",n)},initEvents:function(){var t=this;t.el.on("click","span",function(n){n.preventDefault();var r=e(this),i=r.prevAll().length+1;t.set("rating",i)}),t.on("change:rating",function(e){var n=t.get("input-target"),r=t.get("el.stars");t.el.addClass("rated"),r.removeClass("on"),r.eq(e-1).addClass("on"),n&&n.length&&n.val(e)})}});return function(e){return new r(e)}});